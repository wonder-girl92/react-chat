(this["webpackJsonpchat-challenge"]=this["webpackJsonpchat-challenge"]||[]).push([[0],{16:function(e,t,a){e.exports={container:"app_container__2md0E",noSelectedChat:"app_noSelectedChat__z-dbX",chatNan:"app_chatNan__2pl-P",wrap_message_profile:"app_wrap_message_profile__1yGS5","profile-enter":"app_profile-enter__SYIuX",avatar:"app_avatar__lIBR6",small:"app_small__CsgTD",medium:"app_medium__1wnCI",large:"app_large__1RWTw",mediumonline:"app_mediumonline__1CZLe"}},3:function(e,t,a){e.exports={messages:"messages_messages__1hnN9",header:"messages_header__2OXIE","header-center-block":"messages_header-center-block__12yP8",messageSearch:"messages_messageSearch__BghCU",messageClearIcon:"messages_messageClearIcon__1rYqC",messageSettings:"messages_messageSettings__2YIT7",messageAuthorName:"messages_messageAuthorName__31jDn",messageAuthorNameTitle:"messages_messageAuthorNameTitle__1iAua",messageAuthorNameOnline:"messages_messageAuthorNameOnline__2bRJk",messagesModal:"messages_messagesModal__3RM5Y",messageScroll:"messages_messageScroll__2s2sU",writeMessage:"messages_writeMessage__1qff0",messageSendForm:"messages_messageSendForm__3dxTo",messageWriteRightBlock:"messages_messageWriteRightBlock__80mwV",clip:"messages_clip__8RqV6",microphone:"messages_microphone__1wAcX",messageDesign:"messages_messageDesign__yp6HU",messageDesignIn:"messages_messageDesignIn__3mcy-",messageInText:"messages_messageInText__3eNLj",messageDesignOut:"messages_messageDesignOut__3pzNk",messageTime:"messages_messageTime__2qqrV",messageRead:"messages_messageRead__3bfar",messageText:"messages_messageText__1G2Cq",headerLoading:"messages_headerLoading__g_i2M",rotatePreloader:"messages_rotatePreloader__3F7f4","\u0441hooseChat":"messages_\u0441hooseChat__27NpM",deleteButton:"messages_deleteButton__OTi0L",generalBlockMessageIn:"messages_generalBlockMessageIn__2Y81L",messageAvatar:"messages_messageAvatar__OcNfc"}},30:function(e,t,a){e.exports={enter:"profileTransition_enter__16QoQ",enterActive:"profileTransition_enterActive__1k2rp",exit:"profileTransition_exit__2FoAH",exitActive:"profileTransition_exitActive__L1AEA"}},51:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(15),i=a.n(n),o=a(16),r=a.n(o),l=a(2),d=a(6),m=a.n(d),j=a(7),u=a(0);var h=function(e){var t=e.contact,a=e.size,c=e.online;return Object(l.c)((function(e){return e.application.loading}))?"":Object(u.jsx)("div",{className:"".concat(r.a.avatar,"  ").concat(c?r.a.mediumonline:r.a[a]),children:void 0!==t?t.fullname.substr(0,1):null})};var _=function(){return Object(u.jsxs)("div",{className:m.a.ContactInfoIcons,children:[Object(u.jsx)("span",{className:"material-icons",children:"phone"}),Object(u.jsx)("span",{className:"material-icons",children:"videocam"}),Object(u.jsx)("span",{className:"material-icons",children:"email"})]})};var b=function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:m.a.ContactInfoTitle,children:e.contact.fullname}),Object(u.jsxs)("div",{className:m.a.ContactInfoUsername,children:["@",e.contact.username]}),Object(u.jsx)(_,{})]})};var g=function(e){return Object(u.jsxs)("div",{className:m.a.ContactSocial,children:[Object(u.jsx)("div",{className:m.a.ContactSocialTitle,children:"Social"}),Object(u.jsxs)("div",{className:m.a.ContactSocialNetworks,children:[Object(u.jsxs)("div",{className:m.a.ContactSocialNetworksInstagram,children:[Object(u.jsx)("span",{className:"material-icons",children:"account_circle"}),Object(u.jsx)("div",{className:m.a.ContactSocialNetworksInstagramTitle,children:void 0===e.contact.socials?"":e.contact.socials.instagram})]}),Object(u.jsxs)("div",{className:m.a.ContactSocialNetworksTwitter,children:[Object(u.jsx)("span",{className:"material-icons",children:"storm"}),Object(u.jsx)("div",{className:m.a.ContactSocialNetworksTwitterTitle,children:void 0===e.contact.socials?"":e.contact.socials.facebook})]}),Object(u.jsxs)("div",{className:m.a.ContactSocialNetworksFacebook,children:[Object(u.jsx)("span",{className:"material-icons",children:"email"}),Object(u.jsx)("div",{className:m.a.ContactSocialNetworksFacebookTitle,children:void 0===e.contact.socials?"":e.contact.socials.twitter})]})]})]})};var f=function(e){return Object(u.jsxs)("div",{className:m.a.ContactMedia,children:[Object(u.jsx)("div",{className:m.a.ContactMediaTitle,children:"Media"}),Object(u.jsxs)("div",{className:m.a.ContactMediaElements,children:[Object(u.jsx)("div",{className:m.a.ContactMediaDoc}),Object(u.jsx)("div",{className:m.a.ContactMediaSubtitle,children:"desktop-chat.pdf"})]})]})};var O=function(e){return Object(u.jsxs)("div",{className:m.a.TopProfileBlock,children:[Object(u.jsx)(h,{size:"large",online:!1,contact:e.contact}),Object(u.jsx)(b,{contact:e.contact}),Object(u.jsx)(g,{contact:e.contact}),Object(u.jsx)(f,{})]})};var p=function(){var e=Object(l.c)((function(e){return e.contacts.items})),t=Object(j.f)().id,a=e.filter((function(e){return e._id===t}));return Object(u.jsx)("div",{className:m.a.profileOverflow,children:a.map((function(e){return Object(u.jsx)(O,{contact:e},e._id)}))})},x=a(53),v=a(30),N=a.n(v);var C=function(){var e=Object(l.c)((function(e){return e.messages.showProfile}));return Object(u.jsx)(x.a,{in:e,unmountOnExit:!0,timeout:1e3,classNames:N.a,children:Object(u.jsx)("div",{className:m.a.profile,children:Object(u.jsx)(j.a,{exact:!0,path:"/contact/:id?",children:Object(u.jsx)(p,{})})})})},k=a(8),T=a.n(k),y=a(4),S={filter:"",items:[],loading:!1,selectedContactId:null};var w=function(e){return{type:"filter/contacts",payload:e}};var I=function(){var e=Object(l.c)((function(e){return e.contacts.filter})),t=Object(l.b)();return Object(u.jsx)("div",{className:T.a["contacts-search"],children:Object(u.jsxs)("div",{className:T.a["contact-search"],children:[Object(u.jsx)("button",{className:T.a["contact-search-btn"],children:Object(u.jsx)("span",{className:"material-icons",children:"search"})}),Object(u.jsx)("input",{className:"contactForm",type:"text",placeholder:"Search contact",value:e,onChange:function(e){t(w(e.target.value))}}),0!==e.length&&Object(u.jsx)("button",{className:T.a["contact-clear-btn"],onClick:function(){t(w(""))},children:Object(u.jsx)("span",{className:"material-icons",children:"clear"})})]})})},M=a(18),F=a.n(M);var E=function(e){return Object(u.jsx)(M.SkeletonTheme,{color:"lightgrey",highlightColor:"#dedede",children:Object(u.jsxs)("div",{className:T.a["contacts-skeleton"],children:[Object(u.jsx)("div",{className:T.a["avatar-skeleton"],children:Object(u.jsx)(F.a,{circle:!0,height:35,width:35})}),Object(u.jsxs)("div",{className:T.a["contact-skeleton"],children:[Object(u.jsx)(F.a,{count:1,width:115,height:16}),Object(u.jsx)(F.a,{count:1,width:80,height:12})]}),Object(u.jsx)("div",{className:T.a["time-skeleton"],children:Object(u.jsx)(F.a,{count:1,width:30,height:12})})]})})},A=a(13),D=a(20),B=a.n(D);var P=function(e){var t=e.contact.lastMessage,a=Object(l.c)((function(e){return e.contacts.selectedContactId})),c=Object(l.b)();return Object(u.jsxs)("li",{onClick:function(){c({type:"contacts/select",payload:e.contact._id})},className:a===e.contact._id?"".concat(T.a["contact-active"]," ").concat(T.a["contact-chat"]):"",children:[Object(u.jsx)("div",{className:T.a["contact-avatar"],children:Object(u.jsx)(h,{size:"medium",online:e.contact.online,contact:e.contact})}),Object(u.jsx)(A.b,{to:"/contact/".concat(e.contact._id),children:Object(u.jsxs)("div",{className:T.a["contact-names"],children:[Object(u.jsxs)("div",{className:T.a["contact-name"],children:[" ",e.contact.fullname]}),Object(u.jsx)("div",{className:T.a["contact-last-message"],children:void 0===t?"":t.content.substr(0,20)+"..."})]})}),void 0===t?"":Object(u.jsx)("div",{className:T.a["contact-message-time"],children:D(null===t||void 0===t?void 0:t.time).format("HH:mm")})]})};var L=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.contacts.items})),a=Object(l.c)((function(e){return e.contacts.loading})),s=Object(l.c)((function(e){return e.contacts.filter})),n=t.filter((function(e){return e.fullname.toUpperCase().indexOf(s.toUpperCase())>-1})),i=new Array(9).fill(1).map((function(e,t){return Object(u.jsx)(E,{},t)}));return Object(c.useEffect)((function(){e((function(e){e({type:"contacts/load/start"}),fetch("https://api.intocode.ru:8001/api/contacts").then((function(e){return e.json()})).then((function(t){e({type:"contacts/load/success",payload:t})}))}))}),[e]),Object(u.jsxs)("div",{className:T.a.sidebar,children:[Object(u.jsx)(I,{}),Object(u.jsx)("div",{className:T.a["contacts-chats"],children:Object(u.jsx)("ul",{children:a?i:n.map((function(e){return Object(u.jsx)(P,{contact:e},e._id)}))})})]})},R=a(3),U=a.n(R),H=a(17),J=function(){var e=document.getElementById("block_message");e.scrollTop=e.scrollHeight},z={items:[],loading:!1,filter:"",messageText:"",loadingMessage:!1,searchForm:!1,showProfile:!1};var W=function(e){return function(t){t({type:"filter/set",payload:e})}};var Y=function(){var e=Object(l.c)((function(e){return e.messages.filter})),t=Object(l.c)((function(e){return e.messages.searchForm})),a=Object(l.b)();return Object(u.jsxs)("div",{className:U.a.messageSearch,children:[Object(u.jsx)("button",{className:U.a.messageSearchIcon,children:Object(u.jsx)("span",{className:"material-icons",onClick:function(){a({type:"searchForm/set"})},children:"search"})}),t?Object(u.jsx)("input",{className:U.a.filterMessage,type:"text",value:e,onChange:function(e){a(W(e.target.value))}}):"",0!==e.length&&Object(u.jsx)("button",{className:U.a.messageClearIcon,children:Object(u.jsx)("span",{className:"material-icons",onClick:function(){a(W(""))},children:"clear"})})]})};var q=function(){var e=Object(l.b)(),t=Object(j.f)().id,a=Object(l.c)((function(e){return e.contacts.items})).find((function(e){return e._id===t})),c=Object(l.c)((function(e){return e.messages.loading})),s=Object(l.c)((function(e){return e.messages.showProfile}));return Object(u.jsx)("div",{className:U.a.header,children:Object(u.jsxs)("div",{className:U.a["header-center-block"],children:[Object(u.jsx)(Y,{}),Object(u.jsxs)("div",{className:U.a.messageAuthorName,children:[Object(u.jsx)("div",{className:U.a.messageAuthorNameTitle,children:c?Object(u.jsxs)("div",{className:U.a.headerLoading,children:[Object(u.jsx)("span",{className:"material-icons",children:"cached"}),Object(u.jsx)("div",{children:"Loading..."})]}):null===a||void 0===a?void 0:a.fullname}),Object(u.jsx)("div",{className:U.a.messageAuthorNameOnline,children:!0===(null===a||void 0===a?void 0:a.online)?Object(u.jsx)("span",{className:"material-icons",children:"circle"}):""})]}),Object(u.jsx)("div",{className:U.a.messageSettings,children:Object(u.jsx)("span",{className:"material-icons",onClick:function(){e(function(e){return{type:"change/showProfile",payload:!e}}(s))},children:"settings"})})]})})};var V=function(e){return Object(u.jsx)("div",{className:U.a.messageDesign,children:e.content})};var G=function(e){var t=Object(j.f)().id,a=Object(l.c)((function(e){return e.contacts.items})).find((function(e){return e._id===t}));return Object(u.jsxs)("div",{className:U.a.generalBlockMessageIn,children:[Object(u.jsx)("div",{className:U.a.messageAvatar,children:Object(u.jsx)(h,{size:"small",online:!1,contact:a})}),Object(u.jsx)("div",{className:U.a.messageDesignIn,children:Object(u.jsx)("div",{className:U.a.messageInText,children:e.content})})]})};var X=function(e){var t=e.message.read,a=e.message.time,c=Object(l.b)(),s=e.message._id;return Object(u.jsx)("div",{className:U.a.messageDesignM,children:Object(u.jsxs)("div",{className:U.a.messageDesignOut,children:[Object(u.jsx)("div",{className:U.a.messageOutText,children:e.content}),Object(u.jsx)("div",{className:U.a.messageTime,children:B()(a).format("HH:mm")}),Object(u.jsx)("div",{className:U.a.messageRead,children:!0===t?Object(u.jsx)("div",{children:Object(u.jsx)("span",{className:"material-icons",children:"done_all"})}):Object(u.jsx)("div",{children:Object(u.jsx)("span",{className:"material-icons",children:"check"})})}),Object(u.jsx)("div",{className:U.a.deleteButton,onClick:function(){var e;c((e=s,function(t){t({type:"delete/message/start",payload:e}),fetch("https://api.intocode.ru:8001/api/messages/5f2ea3801f986a01cefc8bcd/".concat(e),{method:"DELETE"}).then((function(){t({type:"DELETE",payload:e})}))}))},children:Object(u.jsx)("span",{className:"material-icons",children:"clear"})})]})})};var Q=function(e){var t=Object(l.c)((function(e){return e.application.profile._id})),a=e.message.toUserId;return Object(l.c)((function(e){return e.messages.loading}))?"":"info"===e.message.type?Object(u.jsx)(V,{content:e.message.content}):a===t?Object(u.jsx)(G,{content:e.message.content,contact:e.contact}):Object(u.jsx)(X,{message:e.message,content:e.message.content})};var Z=function(e){var t=Object(l.b)(),a=Object(l.c)((function(e){return e.messages.items})),s=Object(j.f)().id,n=Object(l.c)((function(e){return e.messages.filter})),i=a.filter((function(e){return e.content.toUpperCase().indexOf(n.toUpperCase())>-1}));return Object(c.useEffect)((function(){var e;t((e=s,function(t){t({type:"message/load/start"}),fetch("https://api.intocode.ru:8001/api/messages/5f2ea3801f986a01cefc8bcd/".concat(e)).then((function(e){return e.json()})).then((function(e){t({type:"message/load/success",payload:e}),J()})).catch((function(e){console.error(e)})),J()}))}),[s,t]),Object(u.jsx)("div",{className:U.a.messagesModal,id:"block_message",children:Object(u.jsx)("div",{className:U.a.messageScroll,children:i.map((function(e){return Object(u.jsx)(Q,{message:e},e._id)}))})})};var K=function(){var e=Object(l.c)((function(e){return e.messages.messageText})),t=Object(l.b)();return Object(u.jsx)("div",{className:U.a.messageSendForm,children:Object(u.jsx)("input",{type:"text",placeholder:"Write a message",value:e,onChange:function(e){t(function(e){return function(t){t({type:"set/message/text",payload:e})}}(e.target.value))}})})};var $=function(e){var t=Object(l.b)(),a=Object(l.c)((function(e){return e.messages.messageText})),c=Object(j.f)().id,s=Object(l.c)((function(e){return e.application.profile._id}));return Object(u.jsxs)("div",{className:U.a.messageWriteRightBlock,children:[Object(u.jsx)("div",{className:U.a.clip,children:Object(u.jsx)("span",{className:"material-icons",children:"attach_file"})}),Object(u.jsx)("div",{className:U.a.microphone,children:""===a?Object(u.jsx)("span",{className:"material-icons",children:"keyboard_voice"}):Object(u.jsx)("span",{className:"material-icons",onClick:function(){t(function(e,t,a){return function(c){c({type:"message/send/start"}),fetch("https://api.intocode.ru:8001/api/messages",{method:"POST",body:JSON.stringify({myId:"".concat(e),contactId:"".concat(t),type:"text",content:"".concat(a)}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){c({type:"message/send/success",payload:e}),J()})).catch((function(e){console.error(e)}))}}(s,c,a))},children:"send"})})]})};var ee=function(e){return Object(u.jsxs)("div",{className:U.a.writeMessage,children:[Object(u.jsx)(K,{}),Object(u.jsx)($,{})]})};var te=function(){return Object(u.jsxs)("div",{className:U.a.messages,children:[Object(u.jsx)(q,{}),Object(u.jsx)(Z,{}),Object(u.jsx)(ee,{})]})},ae={profile:{},loading:!1};var ce=function(){var e=Object(l.b)();return Object(c.useEffect)((function(){e((function(e){e({type:"load/profile/start"}),fetch("https://api.intocode.ru:8001/api/profile").then((function(e){return e.json()})).then((function(t){e({type:"load/profile/finish",payload:t})}))}))}),[e]),Object(u.jsx)("div",{className:r.a.container,children:Object(u.jsxs)(j.c,{children:[Object(u.jsxs)(j.a,{exact:!0,path:"/contact/:id?",children:[Object(u.jsx)(L,{}),Object(u.jsx)(te,{}),Object(u.jsx)(C,{})]}),Object(u.jsxs)(j.a,{children:[Object(u.jsx)(L,{}),Object(u.jsx)("div",{className:r.a.noSelectedChat,children:Object(u.jsx)("div",{className:r.a.chatNan,children:"Please, select a chat to start messaging"})})]})]})})},se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,54)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),s(e),n(e),i(e)}))},ne=a(21),ie=a(32),oe=a(33),re=Object(oe.a)({diff:!0,collapsed:!0}),le=Object(ne.c)(Object(ne.b)({application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){default:return e;case"load/profile/start":return Object(y.a)(Object(y.a)({},e),{},{loading:!0});case"load/profile/finish":return Object(y.a)(Object(y.a)({},e),{},{profile:t.payload,loading:!1})}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"message/load/start":return Object(y.a)(Object(y.a)({},e),{},{loading:!0});case"message/load/success":return Object(y.a)(Object(y.a)({},e),{},{items:t.payload,loading:!1});case"message/send/start":return Object(y.a)(Object(y.a)({},e),{},{loadingMessage:!0,messageText:""});case"message/send/success":return Object(y.a)(Object(y.a)({},e),{},{items:[].concat(Object(H.a)(e.items),[t.payload]),loadingMessage:!1});case"filter/set":return Object(y.a)(Object(y.a)({},e),{},{filter:t.payload});case"searchForm/set":return Object(y.a)(Object(y.a)({},e),{},{searchForm:!e.searchForm});case"DELETE":return Object(y.a)(Object(y.a)({},e),{},{items:e.items.filter((function(e){return e._id!==t.payload}))});case"set/message/text":return Object(y.a)(Object(y.a)({},e),{},{messageText:t.payload});case"change/showProfile":return Object(y.a)(Object(y.a)({},e),{},{showProfile:t.payload});default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"contacts/load/start":return Object(y.a)(Object(y.a)({},e),{},{loading:!0});case"contacts/load/success":return Object(y.a)(Object(y.a)({},e),{},{items:t.payload,loading:!1});case"filter/contacts":return Object(y.a)(Object(y.a)({},e),{},{filter:t.payload});case"contacts/select":return Object(y.a)(Object(y.a)({},e),{},{selectedContactId:t.payload});default:return e}}}),Object(ne.a)(ie.a,re));i.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(A.a,{children:Object(u.jsx)(l.a,{store:le,children:Object(u.jsx)(ce,{})})})}),document.getElementById("root")),se()},6:function(e,t,a){e.exports={profile:"profile_profile__2TIdB",avatar:"profile_avatar__2_CTG",TopProfileBlock:"profile_TopProfileBlock__1Cyzm",ContactInfoTitle:"profile_ContactInfoTitle__P_Zk_",ContactInfoUsername:"profile_ContactInfoUsername__2sPQJ",ContactInfoIcons:"profile_ContactInfoIcons__2hpQI",ContactSocial:"profile_ContactSocial__3yExV",ContactSocialTitle:"profile_ContactSocialTitle__2WKaY",ContactSocialNetworksInstagram:"profile_ContactSocialNetworksInstagram__2wUms",ContactSocialNetworks:"profile_ContactSocialNetworks__IpfU3",ContactSocialNetworksTwitter:"profile_ContactSocialNetworksTwitter__2fBt7",ContactSocialNetworksFacebook:"profile_ContactSocialNetworksFacebook__2wmWT",ContactSocialNetworksInstagramTitle:"profile_ContactSocialNetworksInstagramTitle__2DRxH",ContactSocialNetworksTwitterTitle:"profile_ContactSocialNetworksTwitterTitle__2EJN5",ContactSocialNetworksFacebookTitle:"profile_ContactSocialNetworksFacebookTitle__RUHsp",ContactMedia:"profile_ContactMedia__2zIrF",ContactMediaTitle:"profile_ContactMediaTitle__1lVIe",ContactMediaDoc:"profile_ContactMediaDoc__2Y077",ContactMediaElements:"profile_ContactMediaElements__pRkFu",ContactMediaSubtitle:"profile_ContactMediaSubtitle__1gyjx"}},8:function(e,t,a){e.exports={sidebar:"chats_sidebar__2yTCc","contacts-chats":"chats_contacts-chats__3RsJ-","contact-active":"chats_contact-active__LFcjB","contact-chat":"chats_contact-chat__2oIe1","contacts-search":"chats_contacts-search__nsJct","contact-search":"chats_contact-search__2ga4_","contact-search-btn":"chats_contact-search-btn__7dw_u","contact-clear-btn":"chats_contact-clear-btn__361I8","contact-avatar":"chats_contact-avatar__1eyu6","avatar-skeleton":"chats_avatar-skeleton__3WSIG","contact-names":"chats_contact-names__LGS7c","contact-skeleton":"chats_contact-skeleton__2HaX3","contact-name":"chats_contact-name__2a8DS","contact-last-message":"chats_contact-last-message__14V1J","contact-message-time":"chats_contact-message-time__19Js6","contacts-skeleton":"chats_contacts-skeleton__1I5Of","time-skeleton":"chats_time-skeleton__34te1"}}},[[51,1,2]]]);
//# sourceMappingURL=main.5fdf93f1.chunk.js.map